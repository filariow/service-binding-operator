= Install with HELM

== Prerequisites

* make
* minikube
* kustomize
* helm

== Install

1. Run `minikube` using the script `./hack/start-minikube.sh`

2. Install `certmanager`
+
[source,bash]
----
make deploy-cert-manager
----

3. Configure shell
+
[source,bash]
----
export OPERATOR_IMAGE_REF=sbo-dev:latest
----

4. Build the operator's image into minikube
+
[source,bash]
----
eval $(minikube docker-env)
make image
----

5. Install CRDS
+
[source,bash]
----
make install
----

5. Deploy the operator
+
[source,bash]
----
kubectl create namespace service-binding-operator
helm template \
    --skip-tests \
    --namespace service-binding-operator \
    --set image.name=$OPERATOR_IMAGE_REF \
    --set image.repository=docker.io \
    ./charts/service-binding-operator | kubectl apply -f -
----

== Update Service Binding Operator

To update the running instance of the Service Binding Operator, you can simply rebuild the image and delete the Service Binding Operator's pod:

[source, bash]
----
make image
kubectl delete pods \
    -n service-binding-operator \
    -l "control-plane=service-binding-controller-manager"
----

