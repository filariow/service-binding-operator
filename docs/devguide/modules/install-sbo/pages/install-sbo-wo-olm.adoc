= Install without OLM

== Prerequisites

* make
* minikube
* kustomize

== Install

1. Run `minikube` using the script `./hack/start-minikube.sh`

2. Install `certmanager`

+
[source,bash]
----
make deploy-cert-manager
----

3. Install dependencies and configure image name
+
[source,bash]
----
make yq
export OPERATOR_IMAGE_REF=$(
    kustomize build config/manager | \
    kustomize cfg grep 'kind=Deployment' | \
    ./bin/yq '.spec.template.spec.containers[0].image')
----

4. Build the operator's image into minikube
+
[source,bash]
----
eval $(minikube docker-env)
make image
----

5. Deploy the operator
+
[source,bash]
----
kubectl apply -k config/default
----

== Update Service Binding Operator

To update the running instance of the Service Binding Operator, you can simply rebuild the image and delete the Service Binding Operator's pod:

[source, bash]
----
make image
kubectl delete pods \
    -n service-binding-operator \
    -l "control-plane=service-binding-controller-manager"
----

